<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GRC Lab — Compliance & AI Governance Demo | ThrasherApps</title>
  <meta name="description" content="Interactive GRC and AI governance demo showing how I think about controls, risk, automation, and troubleshooting." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="assets/site.css">

  <!-- Local styles just for the GRC Lab page -->
  <style>
    .dashboard-grid{
      display:grid;
      gap:var(--space-4);
    }
    @media (min-width:900px){
      .dashboard-grid{
        grid-template-columns: 2fr 3fr;
      }
    }

    .metric-cards{
      display:grid;
      gap:var(--space-3);
    }
    @media (min-width:720px){
      .metric-cards{
        grid-template-columns: repeat(3,1fr);
      }
    }
    .metric-label{
      font-size:13px;
      color:var(--text-muted);
      text-transform:uppercase;
      letter-spacing:.04em;
    }
    .metric-value{
      font-size:22px;
      font-weight:600;
      margin-top:4px;
    }

    .risk-bars{
      margin-top: var(--space-2);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .risk-bar-row{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:14px;
    }
    .risk-bar-row-label{
      min-width:90px;
      font-weight:500;
    }
    .risk-bar{
      flex:1;
      height:10px;
      border-radius:999px;
      background:#E5E7EB;
      overflow:hidden;
    }
    .risk-bar-fill{
      height:100%;
      background:var(--color-primary);
      width:0%;
      transition:width .25s ease;
    }
    .risk-bar-score{
      font-size:12px;
      color:var(--text-muted);
      min-width:60px;
      text-align:right;
    }

    .dept-priorities{
      margin-top:var(--space-2);
      display:flex;
      flex-direction:column;
      gap:var(--space-2);
    }
    .dept-block h4{
      font-size:15px;
      margin:0 0 4px;
    }
    .dept-block ul{
      margin:0;
      padding-left:18px;
      font-size:14px;
      color:var(--text-muted);
    }

    .section-caption{
      font-size:13px;
      color:var(--text-muted);
      margin-top:4px;
    }
  </style>
</head>
<body>

  <!-- Sticky Header / Nav -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="/">ThrasherApps</a>
      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="apps.html">Apps</a>
        <a href="ai.html">AI Solutions</a>
        <a href="grc-lab.html">GRC Lab</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-inner">
      <h1>GRC Lab — Technical Compliance & AI Governance</h1>
      <p class="lead">
        This interactive dashboard shows how I troubleshoot controls, quantify risk, analyze audit logs,
        and evaluate AI use cases—exactly the kind of work I want to do for a GRC / technical compliance team.
      </p>
      <p class="mt-2">
        Change control statuses, explore department-level risk, run quick log checks, and score AI use cases.
        The goal is to think like a GRC engineer: <strong>find what’s broken, understand why, and recommend fixes.</strong>
      </p>
    </div>
  </section>

  <!-- Executive Dashboard -->
  <section class="section section--tight">
    <div class="container">
      <h2 class="h2">Executive Dashboard</h2>
      <p class="lead">
        A high-level view for leadership: current posture, failing controls, and where to focus first by department.
      </p>

      <div class="dashboard-grid mt-3">
        <!-- Left: Key metrics -->
        <div class="card">
          <div class="metric-cards">
            <div>
              <div class="metric-label">Overall risk</div>
              <div class="metric-value" id="summary-risk">—</div>
              <div class="section-caption" id="summary-risk-caption">
                Driven by failing / at-risk controls.
              </div>
            </div>
            <div>
              <div class="metric-label">Failing controls</div>
              <div class="metric-value" id="summary-fails">0</div>
              <div class="section-caption">
                Highest severity items requiring remediation.
              </div>
            </div>
            <div>
              <div class="metric-label">Departments impacted</div>
              <div class="metric-value" id="summary-depts">0</div>
              <div class="section-caption">
                Teams with at least one failing or at-risk control.
              </div>
            </div>
          </div>

          <p class="section-caption mt-3">
            These metrics automatically update as you adjust control statuses below,
            mirroring a live GRC dashboard tied to your control library.
          </p>
        </div>

        <!-- Right: Risk by department + priorities -->
        <div class="card">
          <h3 class="h3">Risk by Department</h3>
          <p class="section-caption">
            Simple scoring: failing controls count more than “needs review”.
          </p>
          <div class="risk-bars" id="risk-bars">
            <!-- Filled by JS -->
          </div>

          <h3 class="h3 mt-3">Priority Queue</h3>
          <p class="section-caption">
            Controls are grouped and ordered by severity so each team knows what to fix first.
          </p>
          <div class="dept-priorities" id="dept-priorities">
            <!-- Filled by JS -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Control Status Overview -->
  <section class="section section--tight">
    <div class="container">
      <h2 class="h2">Control Status Overview</h2>
      <p class="lead">
        Representative controls from security, platform, operations, and AI governance.
        Updating their status drives the dashboard above.
      </p>

      <div class="card mt-2">
        <div class="table-wrapper">
          <table class="simple-table" id="controls-table">
            <thead>
              <tr>
                <th>Control ID</th>
                <th>Description</th>
                <th>Owner / Department</th>
                <th>Status</th>
                <th>Last Check</th>
              </tr>
            </thead>
            <tbody>
              <tr data-control-row data-dept="Security">
                <td>AC-01</td>
                <td>User access reviews performed quarterly</td>
                <td>IT Security</td>
                <td>
                  <select data-status>
                    <option value="pass" selected>Pass</option>
                    <option value="watch">Needs Review</option>
                    <option value="fail">Fail</option>
                  </select>
                </td>
                <td>2025-10-01</td>
              </tr>
              <tr data-control-row data-dept="Platform">
                <td>LOG-02</td>
                <td>Critical systems send logs to centralized SIEM</td>
                <td>Platform / SRE</td>
                <td>
                  <select data-status>
                    <option value="pass" selected>Pass</option>
                    <option value="watch">Needs Review</option>
                    <option value="fail">Fail</option>
                  </select>
                </td>
                <td>2025-10-10</td>
              </tr>
              <tr data-control-row data-dept="Operations">
                <td>BCP-03</td>
                <td>Backups tested and restore validated</td>
                <td>Operations</td>
                <td>
                  <select data-status>
                    <option value="pass">Pass</option>
                    <option value="watch" selected>Needs Review</option>
                    <option value="fail">Fail</option>
                  </select>
                </td>
                <td>2025-09-20</td>
              </tr>
              <tr data-control-row data-dept="AI / Product">
                <td>AI-01</td>
                <td>AI models reviewed for bias and misuse risk</td>
                <td>AI / Product</td>
                <td>
                  <select data-status>
                    <option value="pass">Pass</option>
                    <option value="watch">Needs Review</option>
                    <option value="fail" selected>Fail</option>
                  </select>
                </td>
                <td>2025-08-15</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="mt-2">
          <strong>Overall control posture:</strong>
          <span id="control-score" class="badge">Calculating…</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: AI Use Case Risk Checker -->
  <section class="section">
    <div class="container">
      <h2 class="h2">AI Use Case Risk Checker</h2>
      <p class="lead">
        Quick, rule-of-thumb risk scoring based on data sensitivity, impact, and region. Not a legal tool—just a way to
        demonstrate structured thinking for AI governance.
      </p>

      <div class="grid grid-2 mt-3">
        <div class="card">
          <h3>Describe the AI use case</h3>
          <label class="mt-1">
            Model Type
            <select id="model-type">
              <option value="internal">Internal assistant / knowledge bot</option>
              <option value="customer">Customer-facing chatbot</option>
              <option value="decision">Decision-support (loan, hiring, legal)</option>
              <option value="content">Content / marketing generation</option>
            </select>
          </label>

          <label class="mt-1">
            Data Sensitivity
            <select id="data-sensitivity">
              <option value="low">Low (public or non-sensitive)</option>
              <option value="medium">Medium (internal business data)</option>
              <option value="high">High (PII, financial, health, legal)</option>
            </select>
          </label>

          <label class="mt-1">
            Region / Regulatory Environment
            <select id="region">
              <option value="us">US-focused</option>
              <option value="eu">EU / EEA (GDPR / EU AI Act)</option>
              <option value="global">Global / mixed</option>
            </select>
          </label>

          <button class="btn mt-2" id="calc-ai-risk">Calculate Risk</button>
        </div>

        <div class="card" id="ai-risk-output">
          <h3>Risk Summary</h3>
          <p class="mt-1"><strong>Risk Level:</strong> <span id="ai-risk-level">—</span></p>
          <p class="mt-1"><strong>Key Concerns:</strong></p>
          <ul id="ai-risk-concerns">
            <li>Fill out the form and click “Calculate Risk”.</li>
          </ul>
          <p class="mt-1"><strong>Suggested Controls:</strong></p>
          <ul id="ai-risk-controls">
            <li>Model cards / documentation</li>
            <li>Human-in-the-loop review for high-impact decisions</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Audit Log Quick Check -->
  <section class="section section--tight">
    <div class="container">
      <h2 class="h2">Audit Log Quick Check</h2>
      <p class="lead">
        Paste a few sample log lines. The checker flags entries that are missing an evidence ID or show a failure status,
        similar to a lightweight control for monitoring audit completeness.
      </p>

      <div class="grid grid-2 mt-3">
        <div class="card">
          <h3>Sample Logs</h3>
          <p class="mt-1 small">
            Example format: <code>2025-10-01T09:14Z USER=alice ACTION=ACCESS_REVIEW STATUS=OK EVIDENCE_ID=12345</code>
          </p>
          <textarea id="log-input" rows="10" class="textarea">
2025-10-01T09:14Z USER=alice ACTION=ACCESS_REVIEW STATUS=OK EVIDENCE_ID=12345
2025-10-01T10:02Z USER=bob ACTION=BACKUP_RESTORE_TEST STATUS=OK EVIDENCE_ID=88231
2025-10-01T11:25Z USER=service-bot ACTION=MODEL_DEPLOY STATUS=FAILED
2025-10-01T11:32Z USER=carol ACTION=AI_POLICY_ACK STATUS=OK
          </textarea>
          <button class="btn mt-2" id="check-logs">Run Check</button>
        </div>

        <div class="card">
          <h3>Findings</h3>
          <ul id="log-findings" class="mt-1">
            <li>Click “Run Check” to see flagged entries.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div>© 2025 ThrasherApps.com — Built by Chris Thrasher</div>
      <div class="mt-2">
        <a href="mailto:cbthrasher2020@gmail.com">Email</a> ·
        <a href="privacy.html">Privacy</a> ·
        <a target="_blank" href="https://christhrasher.wordpress.com/2025/08/02/trialmate-end-user-license-agreement-eula/">EULA</a>
      </div>
    </div>
  </footer>

  <!-- Page JS -->
  <script>
    // DASHBOARD + CONTROL SCORE
    (function () {
      const rows = document.querySelectorAll('[data-control-row]');
      const badge = document.getElementById('control-score');

      const summaryRisk = document.getElementById('summary-risk');
      const summaryRiskCaption = document.getElementById('summary-risk-caption');
      const summaryFails = document.getElementById('summary-fails');
      const summaryDepts = document.getElementById('summary-depts');
      const riskBarsEl = document.getElementById('risk-bars');
      const deptPrioritiesEl = document.getElementById('dept-priorities');

      function recompute() {
        let totals = { pass: 0, watch: 0, fail: 0 };
        const depts = {}; // dept -> { pass, watch, fail, controls: [{id, desc, status}] }

        rows.forEach(row => {
          const status = row.querySelector('[data-status]').value;
          const dept = row.getAttribute('data-dept') || 'Other';
          const id = row.children[0].textContent.trim();
          const desc = row.children[1].textContent.trim();

          if (!depts[dept]) {
            depts[dept] = { pass: 0, watch: 0, fail: 0, controls: [] };
          }

          if (status === 'pass') {
            totals.pass++;
            depts[dept].pass++;
          } else if (status === 'watch') {
            totals.watch++;
            depts[dept].watch++;
          } else if (status === 'fail') {
            totals.fail++;
            depts[dept].fail++;
          }

          depts[dept].controls.push({ id, desc, status });
        });

        // Overall control posture badge
        let label = '';
        let cls = '';

        if (totals.fail > 0) {
          label = 'High Risk – Failing controls';
          cls = 'badge-danger';
        } else if (totals.watch > 0) {
          label = 'Medium Risk – Items need review';
          cls = 'badge-warn';
        } else {
          label = 'Low Risk – All controls passing';
          cls = '';
        }

        badge.textContent = label || 'No controls configured';
        badge.className = 'badge ' + cls;

        // Summary cards
        let overall = 'Low';
        let caption = 'All controls currently passing.';
        if (totals.fail > 0) {
          overall = 'High';
          caption = 'At least one failing control requires immediate remediation.';
        } else if (totals.watch > 0) {
          overall = 'Medium';
          caption = 'Some controls are at risk and need follow-up.';
        }

        summaryRisk.textContent = overall;
        summaryRiskCaption.textContent = caption;
        summaryFails.textContent = String(totals.fail);

        const impactedDepts = Object.values(depts).filter(d => d.fail > 0 || d.watch > 0).length;
        summaryDepts.textContent = String(impactedDepts);

        // Risk by department bars
        const deptEntries = Object.entries(depts);
        const scores = deptEntries.map(([name, d]) => {
          const score = d.fail * 2 + d.watch * 1;
          return { name, data: d, score };
        }).sort((a, b) => b.score - a.score);

        const maxScore = scores.reduce((m, s) => Math.max(m, s.score), 0) || 1;

        riskBarsEl.innerHTML = '';
        scores.forEach(s => {
          const pct = (s.score / maxScore) * 100;
          let labelText = 'Low';
          if (s.data.fail > 0 && (s.data.watch > 0 || s.data.fail > 1)) {
            labelText = 'High';
          } else if (s.data.fail > 0 || s.data.watch > 0) {
            labelText = 'Medium';
          }

          const row = document.createElement('div');
          row.className = 'risk-bar-row';
          row.innerHTML = `
            <span class="risk-bar-row-label">${s.name}</span>
            <div class="risk-bar"><div class="risk-bar-fill" style="width:${pct}%;"></div></div>
            <span class="risk-bar-score">${labelText}</span>
          `;
          riskBarsEl.appendChild(row);
        });

        if (!scores.length) {
          riskBarsEl.innerHTML = '<div class="section-caption">No departments configured.</div>';
        }

        // Department priorities
        deptPrioritiesEl.innerHTML = '';
        scores.forEach(s => {
          const riskyControls = s.data.controls
            .filter(c => c.status === 'fail' || c.status === 'watch')
            .sort((a, b) => {
              // fail before watch
              const sa = a.status === 'fail' ? 1 : 0;
              const sb = b.status === 'fail' ? 1 : 0;
              return sb - sa;
            });

          if (!riskyControls.length) return;

          const block = document.createElement('div');
          block.className = 'dept-block';
          const listItems = riskyControls.map(c => {
            const label = c.status === 'fail' ? 'Failing' : 'Needs review';
            return `<li><strong>${c.id}</strong> — ${label}: ${c.desc}</li>`;
          }).join('');

          block.innerHTML = `
            <h4>${s.name}</h4>
            <ul>${listItems}</ul>
          `;
          deptPrioritiesEl.appendChild(block);
        });

        if (!deptPrioritiesEl.children.length) {
          deptPrioritiesEl.innerHTML = '<div class="section-caption">All departments are currently passing their controls.</div>';
        }
      }

      rows.forEach(row => {
        row.querySelector('[data-status]').addEventListener('change', recompute);
      });
      recompute();
    })();

    // AI RISK CHECKER
    (function () {
      const btn = document.getElementById('calc-ai-risk');
      const levelEl = document.getElementById('ai-risk-level');
      const concernsEl = document.getElementById('ai-risk-concerns');
      const controlsEl = document.getElementById('ai-risk-controls');

      btn.addEventListener('click', () => {
        const modelType = document.getElementById('model-type').value;
        const data = document.getElementById('data-sensitivity').value;
        const region = document.getElementById('region').value;

        let score = 0;
        const concerns = [];
        const controls = [];

        if (modelType === 'decision') {
          score += 2;
          concerns.push('High-impact decisions (loans, hiring, legal) need strict oversight and explainability.');
          controls.push('Human-in-the-loop approvals for final decisions.');
          controls.push('Documented decision criteria and fairness / bias testing.');
        } else if (modelType === 'customer') {
          score += 1;
          concerns.push('Customer-facing systems can impact brand, trust, and regulatory exposure.');
          controls.push('Clear user disclaimers, escalation paths, and monitoring of responses.');
        }

        if (data === 'high') {
          score += 2;
          concerns.push('High-sensitivity data requires strict privacy, retention, and access controls.');
          controls.push('Data minimization, encryption in transit and at rest, and strict role-based access.');
          controls.push('Formal DPIA / risk assessments for the use case.');
        } else if (data === 'medium') {
          score += 1;
          concerns.push('Internal data still needs classification, retention, and usage policies.');
        }

        if (region === 'eu' || region === 'global') {
          score += 1;
          concerns.push('EU / global deployments must consider GDPR and EU AI Act obligations.');
          controls.push('Data processing records, DPO involvement where needed, and lawful basis tracking.');
        }

        let level = 'Low';
        if (score >= 4) level = 'High';
        else if (score >= 2) level = 'Medium';

        levelEl.textContent = level + ' Risk';

        concernsEl.innerHTML = '';
        controlsEl.innerHTML = '';

        if (!concerns.length) {
          concernsEl.innerHTML = '<li>Relatively low inherent risk, but basic governance still required.</li>';
        } else {
          concerns.forEach(c => {
            const li = document.createElement('li');
            li.textContent = c;
            concernsEl.appendChild(li);
          });
        }

        if (!controls.length) {
          controlsEl.innerHTML = '<li>Document the use case, owners, and basic monitoring.</li>';
        } else {
          controls.forEach(c => {
            const li = document.createElement('li');
            li.textContent = c;
            controlsEl.appendChild(li);
          });
        }
      });
    })();

    // LOG CHECKER
    (function () {
      const btn = document.getElementById('check-logs');
      const input = document.getElementById('log-input');
      const findings = document.getElementById('log-findings');

      btn.addEventListener('click', () => {
        const lines = input.value.split('\n').map(l => l.trim()).filter(Boolean);
        findings.innerHTML = '';

        if (!lines.length) {
          findings.innerHTML = '<li>No log lines provided.</li>';
          return;
        }

        let issues = 0;
        lines.forEach((line, idx) => {
          const hasEvidence = line.includes('EVIDENCE_ID=');
          const failed = line.includes('FAILED') || line.includes('ERROR');

          if (!hasEvidence || failed) {
            issues++;
            const li = document.createElement('li');
            li.textContent = `Line ${idx + 1}: ${!hasEvidence ? 'Missing EVIDENCE_ID; ' : ''}${failed ? 'Status indicates failure.' : ''}`;
            findings.appendChild(li);
          }
        });

        if (issues === 0) {
          findings.innerHTML = '<li>All log lines look healthy and include evidence IDs.</li>';
        }
      });
    })();

    // NAV HIGHLIGHT (same pattern as index)
    (function () {
      const here = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('.nav-links a').forEach(a => {
        const target = a.getAttribute('href');
        if ((here === 'index.html' && target === '/') || here === target) {
          a.classList.add('active');
        }
      });
    })();
  </script>
</body>
</html>
